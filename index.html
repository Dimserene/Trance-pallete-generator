<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Color Picker and Editor with Spectrum</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Mobile friendly -->
    <!-- Include Spectrum CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.1/spectrum.min.css">
    <style>
        /* Include your CSS styles here */
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
        }
        h1 {
            text-align: center;
            padding: 0.5em;
            background-color: #374244;
            color: #ffffff;
            margin: 0;
            font-size: 1.5em;
        }
        #colorContainer {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            padding: 0.5em;
        }
        .category {
            flex: 1 1 300px;
            margin: 0.25em;
            background-color: #ffffff;
            border-radius: 4px;
            box-sizing: border-box;
            padding: 0.5em;
        }
        .category h2 {
            margin: 0 0 0.5em 0;
            font-size: 1.2em;
            text-align: center;
        }
        .color-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0.5em;
        }
        .color-item {
            display: flex;
            align-items: center;
            padding: 0.25em;
            background-color: #f9f9f9;
            border-radius: 4px;
            flex-wrap: wrap; /* Ensure elements wrap on smaller screens */
        }
        .color-name {
            flex: 0 0 100%;
            font-size: 0.9em;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            margin-bottom: 0.25em;
        }
        .color-original {
            width: 1.5em;
            height: 1.5em;
            border: 1px solid #cccccc;
            border-radius: 2px;
            margin-right: 0.5em;
        }
        .arrow {
            margin-right: 0.5em;
            font-size: 1.2em;
        }
        .color-picker {
            margin-right: 0.5em;
            width: 1.5em;
            height: 1.5em;
            border: none;
            background: none;
            padding: 0;
        }
        .hex-input {
            width: 4.5em;
            padding: 0.2em;
            font-size: 0.9em;
            border: 1px solid #cccccc;
            border-radius: 2px;
            text-transform: uppercase;
        }
        #exportButton {
            display: block;
            margin: 0.5em auto;
            padding: 0.5em 1em;
            font-size: 1em;
            background-color: #374244;
            color: #ffffff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        #exportButton:hover {
            background-color: #4f6367;
        }
        #exportOutput {
            width: calc(100% - 1em);
            height: 150px;
            margin: 0.5em auto;
            display: block;
            font-family: monospace;
            padding: 0.5em;
            box-sizing: border-box;
            border: 1px solid #cccccc;
            border-radius: 4px;
            resize: vertical;
        }
        @media (max-width: 600px) {
            .category {
                flex: 1 1 100%;
            }
            .color-grid {
                grid-template-columns: 1fr;
            }
            .color-item {
                flex-direction: column;
                align-items: flex-start;
            }
            .color-original,
            .arrow,
            .color-picker,
            .hex-input {
                margin-right: 0;
                margin-bottom: 0.25em;
            }
            .color-name {
                margin-bottom: 0.25em;
            }
        }
    </style>
</head>
<body>

    <h1>Color Picker and Editor</h1>

    <div id="colorContainer"></div>

    <button id="exportButton">Export Updated Colors</button>
    <textarea id="exportOutput" placeholder="Updated colors will appear here..."></textarea>

    <!-- Include jQuery (Spectrum dependency) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Include Spectrum JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.1/spectrum.min.js"></script>
    <script>
        // Original color data
        const colorData = {
            SPLASH: ['FE5F55', '009DFF'],
            MULT: 'FE5F55',
            CHIPS: '009dff',
            PLASMA: 'cc73d9',
            MONEY: 'f3b958',
            XMULT: 'FE5F55',
            FILTER: 'ff9a00',
            BLUE: '009dff',
            RED: 'FE5F55',
            GREEN: '4BC292',
            PALE_GREEN: '56a887',
            ORANGE: 'fda200',
            IMPORTANT: 'ff9a00',
            GOLD: 'eac058',
            YELLOW: 'ffff00',
            CLEAR: '00000000',
            WHITE: 'ffffff',
            PURPLE: '8867a5',
            BLACK: '374244',
            L_BLACK: '4f6367',
            GREY: '5f7377',
            CHANCE: '4BC292',
            JOKER_GREY: 'bfc7d5',
            VOUCHER: 'cb724c',
            BOOSTER: '646eb7',
            ETERNAL: 'c75985',
            PERISHABLE: '4f5da1',
            RENTAL: 'b18f43',
            DYN_UI: {
                MAIN: '374244',
                DARK: '374244',
                BOSS_MAIN: '374244',
                BOSS_DARK: '374244',
                BOSS_PALE: '374244'
            },
            SO_1: {
                Hearts: 'f03464',
                Diamonds: 'f06b3f',
                Spades: '403995',
                Clubs: '235955'
            },
            SO_2: {
                Hearts: 'f83b2f',
                Diamonds: 'e29000',
                Spades: '4f31b9',
                Clubs: '008ee6'
            },
            UI: {
                TEXT_LIGHT: 'ffffff',
                TEXT_DARK: '4F6367',
                TEXT_INACTIVE: '88888899',
                BACKGROUND_LIGHT: 'B8D8D8',
                BACKGROUND_WHITE: 'ffffff',
                BACKGROUND_DARK: '7A9E9F',
                BACKGROUND_INACTIVE: '666666FF',
                OUTLINE_LIGHT: 'D8D8D8',
                OUTLINE_LIGHT_TRANS: 'D8D8D866',
                OUTLINE_DARK: '7A9E9F',
                TRANSPARENT_LIGHT: 'eeeeee22',
                TRANSPARENT_DARK: '22222222',
                HOVER: '00000055'
            },
            SET: {
                Default: 'cdd9dc',
                Enhanced: 'cdd9dc',
                Joker: '424e54',
                Tarot: '424e54',
                Planet: '424e54',
                Spectral: '424e54',
                Voucher: '424e54'
            },
            SECONDARY_SET: {
                Default: '9bb6bdFF',
                Enhanced: '8389DDFF',
                Joker: '708b91',
                Tarot: 'a782d1',
                Planet: '13afce',
                Spectral: '4584fa',
                Voucher: 'fd682b',
                Edition: '4ca893'
            },
            RARITY: ['009dff', '4BC292', 'fe5f55', 'b26cbb'],
            BLIND: {
                Small: '50846e',
                Big: '50846e',
                Boss: 'b44430',
                won: '4f6367'
            },
            HAND_LEVELS: ['efefef', '95acff', '65efaf', 'fae37e', 'ffc052', 'f87d75', 'caa0ef'],
            BACKGROUND: {
                L: 'ffff00',
                D: '374244',
                C: '374244'
            },
            BOSSES: {
                bl_ox: 'b95b08',
                bl_hook: 'a84024',
                bl_mouth: 'ae718e',
                bl_fish: '3e85bd',
                bl_club: 'b9cb92',
                bl_manacle: '575757',
                bl_tooth: 'b52d2d',
                bl_wall: '8a59a5',
                bl_house: '5186a8',
                bl_mark: '6a3847',
                bl_wheel: '50bf7c',
                bl_arm: '6865f3',
                bl_psychic: 'efc03c',
                bl_goad: 'b95c96',
                bl_water: 'c6e0eb',
                bl_eye: '4b71e4',
                bl_plant: '709284',
                bl_needle: '5c6e31',
                bl_head: 'ac9db4',
                bl_window: 'a9a295',
                bl_serpent: '439a4f',
                bl_pillar: '7e6752',
                bl_flint: 'e56a2f',
                bl_final_bell: '009cfd',
                bl_final_leaf: '56a786',
                bl_final_vessel: '8a71e1',
                bl_final_acorn: 'fda200',
                bl_final_heart: 'ac3232'
            }
        };

        // Function to create color pickers using Spectrum
        function createColorPickers(data, container, categoryName) {
            const categoryDiv = document.createElement('div');
            categoryDiv.className = 'category';

            if (categoryName) {
                const categoryTitle = document.createElement('h2');
                categoryTitle.textContent = categoryName;
                categoryDiv.appendChild(categoryTitle);
            }

            const colorGrid = document.createElement('div');
            colorGrid.className = 'color-grid';

            for (const key in data) {
                if (typeof data[key] === 'object' && !Array.isArray(data[key])) {
                    createColorPickers(data[key], categoryDiv, key);
                } else if (Array.isArray(data[key])) {
                    data[key].forEach((item, index) => {
                        createColorItem(item, `${key}[${index}]`, data[key], index, colorGrid);
                    });
                } else {
                    createColorItem(data[key], key, data, key, colorGrid);
                }
            }

            categoryDiv.appendChild(colorGrid);
            container.appendChild(categoryDiv);
        }

        function createColorItem(colorValue, displayName, parentData, dataKey, container) {
            const colorItem = document.createElement('div');
            colorItem.className = 'color-item';

            const colorName = document.createElement('div');
            colorName.className = 'color-name';
            colorName.textContent = displayName;

            const colorOriginal = document.createElement('div');
            colorOriginal.className = 'color-original';
            colorOriginal.style.backgroundColor = '#' + colorValue.slice(0, 6);

            const arrow = document.createElement('div');
            arrow.className = 'arrow';
            arrow.textContent = '→';

            // Create an input for Spectrum
            const colorInput = document.createElement('input');
            colorInput.type = 'text';
            colorInput.className = 'color-picker';

            // Set initial value
            colorInput.value = '#' + colorValue.slice(0, 6);

            const hexInput = document.createElement('input');
            hexInput.type = 'text';
            hexInput.value = colorValue.slice(0, 6).toUpperCase();
            hexInput.className = 'hex-input';
            hexInput.maxLength = 6;

            // Append elements
            colorItem.appendChild(colorName);
            colorItem.appendChild(colorOriginal);
            colorItem.appendChild(arrow);
            colorItem.appendChild(colorInput);
            colorItem.appendChild(hexInput);

            container.appendChild(colorItem);

            // Initialize Spectrum on the colorInput
            $(colorInput).spectrum({
                color: colorInput.value,
                showInput: false,
                showInitial: false,
                preferredFormat: "hex",
                change: function(tinycolor) {
                    const newHex = tinycolor.toHexString().toUpperCase();
                    hexInput.value = newHex.slice(1);
                    parentData[dataKey] = newHex.slice(1) + colorValue.slice(6);
                },
                move: function(tinycolor) {
                    // Optional: update hexInput while moving the selector
                    const newHex = tinycolor.toHexString().toUpperCase();
                    hexInput.value = newHex.slice(1);
                }
            });

            // Update functions
            function updateColor(newColor) {
                if (/^[0-9A-Fa-f]{6}$/.test(newColor)) {
                    $(colorInput).spectrum("set", '#' + newColor);
                    parentData[dataKey] = newColor + colorValue.slice(6);
                }
            }

            hexInput.addEventListener('input', function() {
                const newHex = hexInput.value.toUpperCase();
                if (/^[0-9A-Fa-f]{6}$/.test(newHex)) {
                    updateColor(newHex);
                }
            });

            hexInput.addEventListener('blur', function() {
                // Validate hex code on blur
                if (!/^[0-9A-Fa-f]{6}$/.test(hexInput.value)) {
                    const currentHex = parentData[dataKey].slice(0,6).toUpperCase();
                    hexInput.value = currentHex;
                }
            });
        }

        // Initialize the color pickers
        const colorContainer = document.getElementById('colorContainer');
        createColorPickers(colorData, colorContainer);

        // Export functionality
        document.getElementById('exportButton').addEventListener('click', function() {
            const exportedData = JSON.stringify(colorData, null, 4);
            document.getElementById('exportOutput').value = exportedData;
        });
    </script>
</body>
</html>
