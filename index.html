<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Trance Palette Generator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Include jscolor library -->
    <script src="https://jscolor.com/releases/2.4.5/jscolor.js"></script>
    <style>
        /* General Styles */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            text-align: center;
            padding: 10px;
            margin: 0;
        }
        h1 {
            margin-top: 20px;
            font-size: 1.5em;
        }
        .palette-group {
            margin: 20px 0;
        }
        .group-title {
            font-size: 1.2em;
            margin-bottom: 10px;
            text-decoration: underline;
        }
        .palette-item {
            display: flex;
            flex-wrap: nowrap;
            justify-content: center;
            align-items: center;
            margin: 10px 0;
        }
        .palette-item > div, .palette-item > span, .palette-item > input {
            margin: 5px;
        }
        .subtitle {
            font-weight: bold;
            min-width: 80px;
        }
        .default-color, .new-color {
            display: inline-block;
            width: 100px;
            padding: 10px;
            color: #fff;
            font-weight: bold;
            border-radius: 5px;
            text-align: center;
        }
        .palette-item input[type="text"] {
            width: 100px;
            padding: 10px;
            border: none;
            text-align: center;
            font-weight: bold;
            color: #fff;
            border-radius: 5px;
            cursor: pointer;
        }
        .palette-item input[type="text"].jscolor {
            padding: 0;
            background: none;
        }
        button {
            margin-top: 20px;
            padding: 15px 25px;
            font-size: 1em;
            cursor: pointer;
            border: none;
            background-color: #374244;
            color: #fff;
            border-radius: 5px;
        }
        button:hover {
            background-color: #4f6367;
        }
        /* Responsive adjustments */
        @media (max-width: 600px) {
            h1 {
                font-size: 1.2em;
            }
            .subtitle, .default-color, .new-color, .palette-item input[type="text"] {
                width: 80px;
                font-size: 0.9em;
                padding: 8px;
            }
            .palette-item {
                flex-wrap: wrap;
            }
            button {
                padding: 12px 20px;
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <h1>Trance Palette Generator</h1>

    <div id="palette-container">
        <!-- Main Colors -->
        <div class="palette-group">
            <div class="group-title">Main Colors</div>
            <!-- SPLASH -->
            <div class="palette-item">
                <div class="subtitle">SPLASH</div>
                <span class="default-color" style="background-color: #FE5F55;">#FE5F55</span>
                <input class="jscolor {onFineChange:'updateColor(this)'}" id="SPLASH" value="FE5F55">
                <span class="new-color" id="new-SPLASH" style="background-color: #FE5F55;">#FE5F55</span>
            </div>
            <!-- MULT -->
            <div class="palette-item">
                <div class="subtitle">MULT</div>
                <span class="default-color" style="background-color: #FE5F55;">#FE5F55</span>
                <input class="jscolor {onFineChange:'updateColor(this)'}" id="MULT" value="FE5F55">
                <span class="new-color" id="new-MULT" style="background-color: #FE5F55;">#FE5F55</span>
            </div>
            <!-- CHIPS -->
            <div class="palette-item">
                <div class="subtitle">CHIPS</div>
                <span class="default-color" style="background-color: #009DFF;">#009DFF</span>
                <input class="jscolor {onFineChange:'updateColor(this)'}" id="CHIPS" value="009DFF">
                <span class="new-color" id="new-CHIPS" style="background-color: #009DFF;">#009DFF</span>
            </div>
            <!-- Continue with other main colors... -->
            <!-- PLASMA -->
            <div class="palette-item">
                <div class="subtitle">PLASMA</div>
                <span class="default-color" style="background-color: #CC73D9;">#CC73D9</span>
                <input class="jscolor {onFineChange:'updateColor(this)'}" id="PLASMA" value="CC73D9">
                <span class="new-color" id="new-PLASMA" style="background-color: #CC73D9;">#CC73D9</span>
            </div>
            <!-- MONEY -->
            <div class="palette-item">
                <div class="subtitle">MONEY</div>
                <span class="default-color" style="background-color: #F3B958;">#F3B958</span>
                <input class="jscolor {onFineChange:'updateColor(this)'}" id="MONEY" value="F3B958">
                <span class="new-color" id="new-MONEY" style="background-color: #F3B958;">#F3B958</span>
            </div>
            <!-- Continue adding other colors similarly -->
        </div>

        <!-- UI Colors -->
        <div class="palette-group">
            <div class="group-title">UI Colors</div>
            <!-- UI_TEXT_LIGHT -->
            <div class="palette-item">
                <div class="subtitle">TEXT_LIGHT</div>
                <span class="default-color" style="background-color: #FFFFFF;">#FFFFFF</span>
                <input class="jscolor {onFineChange:'updateColor(this)'}" id="UI_TEXT_LIGHT" value="FFFFFF">
                <span class="new-color" id="new-UI_TEXT_LIGHT" style="background-color: #FFFFFF;">#FFFFFF</span>
            </div>
            <!-- UI_TEXT_DARK -->
            <div class="palette-item">
                <div class="subtitle">TEXT_DARK</div>
                <span class="default-color" style="background-color: #4F6367;">#4F6367</span>
                <input class="jscolor {onFineChange:'updateColor(this)'}" id="UI_TEXT_DARK" value="4F6367">
                <span class="new-color" id="new-UI_TEXT_DARK" style="background-color: #4F6367;">#4F6367</span>
            </div>
            <!-- Continue with other UI colors... -->
        </div>

        <!-- Continue adding groups for other categories like SET, BOSSES, etc. -->

    </div>

    <!-- Button to Export the Palette -->
    <button onclick="exportPalette()">Export Palette</button>

    <script>
        // Function to update the new color and background
        function updateColor(picker) {
            const colorId = picker.id;
            const newColorSpan = document.getElementById('new-' + colorId);
            const colorValue = '#' + picker.value.toUpperCase();
            newColorSpan.style.backgroundColor = colorValue;
            newColorSpan.textContent = colorValue;
            picker.style.backgroundColor = colorValue;
            picker.style.color = getContrastingColor(colorValue);
        }

        // Function to get contrasting text color (black or white)
        function getContrastingColor(hexColor) {
            const r = parseInt(hexColor.substr(1,2),16);
            const g = parseInt(hexColor.substr(3,2),16);
            const b = parseInt(hexColor.substr(5,2),16);
            const brightness = (r * 299 + g * 587 + b * 114) / 1000;
            return brightness > 125 ? '#000' : '#fff';
        }

        // Function to export the palette as a Lua file
        function exportPalette() {
            const colorIds = [
                // Main Colors
                'SPLASH', 'MULT', 'CHIPS', 'PLASMA', 'MONEY', 'XMULT', 'FILTER', 'BLUE', 'RED', 'GREEN',
                'PALE_GREEN', 'ORANGE', 'IMPORTANT', 'GOLD', 'YELLOW', 'CLEAR', 'WHITE', 'PURPLE', 'BLACK', 'L_BLACK',
                'GREY', 'CHANCE', 'JOKER_GREY', 'VOUCHER', 'BOOSTER', 'ETERNAL', 'PERISHABLE', 'RENTAL',
                // UI Colors
                'UI_TEXT_LIGHT', 'UI_TEXT_DARK', 'UI_TEXT_INACTIVE', 'UI_BACKGROUND_LIGHT', 'UI_BACKGROUND_WHITE',
                'UI_BACKGROUND_DARK', 'UI_BACKGROUND_INACTIVE', 'UI_OUTLINE_LIGHT', 'UI_OUTLINE_LIGHT_TRANS',
                'UI_OUTLINE_DARK', 'UI_TRANSPARENT_LIGHT', 'UI_TRANSPARENT_DARK', 'UI_HOVER',
                // Add other color IDs here
            ];

            let luaScript = "return {\n";

            colorIds.forEach(id => {
                const picker = document.getElementById(id);
                if (picker) {
                    const colorValue = picker.value.toUpperCase();
                    luaScript += `    ${id} = HEX('${colorValue}'),\n`;
                }
            });

            luaScript += "}";

            // Create a Blob object representing the Lua file
            const blob = new Blob([luaScript], { type: 'text/plain' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'trance_palette.lua';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>
</body>
</html>
