<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Trance Palette Generator v1.3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Mobile friendly -->
    <!-- Include Spectrum CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.1/spectrum.min.css">
    <style>
        /* Base CSS Styles */
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
        }
        h1 {
            text-align: center;
            padding: 0.5em;
            background-color: #374244;
            color: #ffffff;
            margin: 0;
            font-size: 1.5em;
        }
        #colorContainer {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.5em;
        }
        .category {
            width: 100%;
            max-width: 1200px;
            margin: 0.5em 0;
            background-color: #ffffff;
            border-radius: 4px;
            box-sizing: border-box;
            padding: 0.5em;
            display: block; /* Ensure block display */
        }
        .category h2 {
            margin: 1em 0 0.5em 0;
            font-size: 1.2em;
            text-align: left;
            border-bottom: 1px solid #ccc;
            padding-bottom: 0.25em;
            display: block; /* Ensure block display */
            width: 100%; /* Ensure it takes full width */
        }
        .color-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 0.5em;
        }
        .color-item {
            display: flex;
            flex-direction: column; /* Adjusted to column to include comments */
            align-items: flex-start; /* Align items to the start */
            padding: 0.25em;
            background-color: #f9f9f9;
            border-radius: 4px;
        }
        .color-name {
            font-size: 0.9em;
            overflow-wrap: break-word; /* Break long words */
            margin-bottom: 0.25em; /* Add margin below for spacing */
            font-weight: bold;
        }
        .color-comment {
            font-size: 0.8em;
            color: #555;
            margin-bottom: 0.5em;
        }
        .controls-container {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
        }
        .controls-container > * {
            flex: 0 0 auto;
            margin-right: 0.25em;
            margin-bottom: 0.25em; /* Add margin for wrapping */
        }
        .color-original,
        .arrow,
        .color-picker {
            width: 1.2em;
            height: 1.2em;
        }
        .hex-input {
            width: 5em;
            padding: 0.2em;
            font-size: 0.8em;
            border: 1px solid #cccccc;
            border-radius: 2px;
            text-transform: uppercase;
        }
        .reset-button {
            width: 1.2em;
            height: 1.2em;
            background: url('https://raw.githubusercontent.com/Dimserene/Trance-pallete-generator/main/reset.png') no-repeat center;
            background-size: contain;
            border: none;
            cursor: pointer;
            padding: 0;
            margin-right: 0.25em;
        }
        #resetAllButton,
        #exportLuaButton {
            display: inline-block;
            margin: 0.5em;
            padding: 0.5em 1em;
            font-size: 1em;
            background-color: #374244;
            color: #ffffff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        #resetAllButton:hover,
        #exportLuaButton:hover {
            background-color: #4f6367;
        }
        #exportLuaOutput {
            width: calc(100% - 1em);
            max-width: 1200px;
            height: 250px;
            margin: 0.5em auto;
            display: block;
            font-family: monospace;
            padding: 0.5em;
            box-sizing: border-box;
            border: 1px solid #cccccc;
            border-radius: 4px;
            resize: vertical;
        }
        /* Mobile Styles */
        @media (max-width: 600px) {
            .category {
                padding: 0.25em;
                display: block; /* Ensure block display */
            }
            .category h2 {
                font-size: 1em;
                margin: 1em 0 0.25em 0; /* Add top margin */
                padding-bottom: 0.25em;
                display: block; /* Ensure block display */
                width: 100%; /* Ensure it takes full width */
            }
            .color-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 0.25em;
            }
            .color-item {
                padding: 0.25em;
                align-items: flex-start;
            }
            .color-name {
                font-size: 0.8em;
                margin-bottom: 0.25em;
            }
            .color-comment {
                font-size: 0.7em;
                margin-bottom: 0.25em;
            }
            .controls-container > * {
                margin-right: 0.25em;
                margin-bottom: 0.25em;
            }
            .color-original,
            .arrow,
            .color-picker,
            .reset-button {
                width: 1em;
                height: 1em;
            }
            .hex-input {
                width: 4em;
            }
            #resetAllButton,
            #exportLuaButton {
                margin: 0.25em;
                padding: 0.5em 1em;
            }
            #exportLuaOutput {
                height: 200px;
                margin: 0.25em auto;
            }
        }
    </style>
</head>
<body>

    <h1>Trance Palette Generator v1.3</h1>

    <div id="colorContainer"></div>

    <div style="text-align: center;">
        <button id="resetAllButton">Reset All</button>
        <button id="exportLuaButton">Export</button>
    </div>
    <textarea id="exportLuaOutput" placeholder="Updated colors in Lua format will appear here..."></textarea>

    <!-- Include jQuery (Spectrum dependency) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Include Spectrum JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/spectrum/1.8.1/spectrum.min.js"></script>
    <script>
        // Updated color data with comments and original color codes
        const defaultColorData = [
            {
                key: 'SPLASH',
                value: ['FE5F55', '009DFF'],
                comment: ['Affects Title Screen / Boss Screen colors', 'Affects Title Screen / Boss Screen colors']
            },
            {
                key: 'MULT',
                value: 'FE5F55',
                comment: 'Color of the Multiplier half of the score equation'
            },
            {
                key: 'CHIPS',
                value: '009DFF',
                comment: 'Color of the Chips half of the score equation'
            },
            {
                key: 'PLASMA',
                value: 'CC73D9',
                comment: 'Color of both halves when score is \'Balanced\' by Plasma Deck'
            },
            {
                key: 'MONEY',
                value: 'F3B958',
                comment: 'Color of current Money ($)'
            },
            {
                key: 'XMULT',
                value: 'FE5F55',
                comment: 'Background of Xmult in joker descriptions'
            },
            {
                key: 'FILTER',
                value: 'FF9A00',
                comment: 'See IMPORTANT'
            },
            {
                key: 'BLUE',
                value: '009DFF',
                comment: 'See CHIPS'
            },
            {
                key: 'RED',
                value: 'FE5F55',
                comment: 'See MULT'
            },
            {
                key: 'GREEN',
                value: '4BC292',
                comment: 'Base background color'
            },
            {
                key: 'PALE_GREEN',
                value: '56A887',
                comment: 'Background accent color'
            },
            {
                key: 'ORANGE',
                value: 'FDA200',
                comment: 'Color of some options (on main menu, Options button)'
            },
            {
                key: 'IMPORTANT',
                value: 'FF9A00',
                comment: 'Accent color of joker cards (such as designated hand)'
            },
            {
                key: 'GOLD',
                value: 'EAC058',
                comment: 'Money when described in a joker description'
            },
            {
                key: 'YELLOW',
                value: 'FFFF00',
                comment: 'General yellow'
            },
            {
                key: 'CLEAR',
                value: '00000000',
                comment: 'An exactly clear color (e.g., glass cards)'
            },
            {
                key: 'WHITE',
                value: 'FFFFFF',
                comment: 'Exactly white, can mess up shaders if changed'
            },
            {
                key: 'PURPLE',
                value: '8867A5',
                comment: 'Color for "Tarot Card" when mentioned'
            },
            {
                key: 'BLACK',
                value: '374244',
                comment: 'Black'
            },
            {
                key: 'L_BLACK',
                value: '4F6367',
                comment: 'Light Black'
            },
            {
                key: 'GREY',
                value: '5F7377',
                comment: 'Grey'
            },
            {
                key: 'CHANCE',
                value: '4BC292',
                comment: 'Probability Color'
            },
            {
                key: 'JOKER_GREY',
                value: 'BFC7D5',
                comment: 'Joker Grey (text color)'
            },
            {
                key: 'VOUCHER',
                value: 'CB724C',
                comment: 'Background for "Voucher" text'
            },
            {
                key: 'BOOSTER',
                value: '646EB7',
                comment: 'Background for "Booster" text'
            },
            {
                key: 'ETERNAL',
                value: 'C75985',
                comment: 'Background for "Eternal" text'
            },
            {
                key: 'PERISHABLE',
                value: '4F5DA1',
                comment: 'Background for "Perishable" text'
            },
            {
                key: 'RENTAL',
                value: 'B18F43',
                comment: 'Background for "Rental" text'
            },
            {
                key: 'DYN_UI',
                value: [
                    { key: 'MAIN', value: '374244', comment: '' },
                    { key: 'DARK', value: '374244', comment: '' },
                    { key: 'BOSS_MAIN', value: '374244', comment: '' },
                    { key: 'BOSS_DARK', value: '374244', comment: '' },
                    { key: 'BOSS_PALE', value: '374244', comment: '' }
                ],
                comment: ''
            },
            {
                key: 'SO_1',
                value: [
                    { key: 'Hearts', value: 'F03464', comment: 'High Contrast Heart Suit Colors (when mentioned)' },
                    { key: 'Diamonds', value: 'F06B3F', comment: 'High Contrast Diamonds Suit Colors (when mentioned)' },
                    { key: 'Spades', value: '403995', comment: 'High Contrast Spades Suit Colors (when mentioned)' },
                    { key: 'Clubs', value: '235955', comment: 'High Contrast Clubs Suit Colors (when mentioned)' }
                ],
                comment: 'High Contrast Suit Colors (when mentioned)'
            },
            {
                key: 'SO_2',
                value: [
                    { key: 'Hearts', value: 'F83B2F', comment: 'Normal Hearts suit colors (when mentioned)' },
                    { key: 'Diamonds', value: 'E29000', comment: 'Normal Diamonds suit colors (when mentioned)' },
                    { key: 'Spades', value: '4F31B9', comment: 'Normal Spades suit colors (when mentioned)' },
                    { key: 'Clubs', value: '008EE6', comment: 'Normal Clubs suit colors (when mentioned)' }
                ],
                comment: 'Normal suit colors (when mentioned)'
            },
            {
                key: 'UI',
                value: [
                    { key: 'TEXT_LIGHT', value: 'FFFFFF', comment: '' },
                    { key: 'TEXT_DARK', value: '4F6367', comment: '' },
                    { key: 'TEXT_INACTIVE', value: '88888899', comment: '' },
                    { key: 'BACKGROUND_LIGHT', value: 'B8D8D8', comment: '' },
                    { key: 'BACKGROUND_WHITE', value: 'FFFFFF', comment: '' },
                    { key: 'BACKGROUND_DARK', value: '7A9E9F', comment: '' },
                    { key: 'BACKGROUND_INACTIVE', value: '666666FF', comment: '' },
                    { key: 'OUTLINE_LIGHT', value: 'D8D8D8', comment: '' },
                    { key: 'OUTLINE_LIGHT_TRANS', value: 'D8D8D866', comment: '' },
                    { key: 'OUTLINE_DARK', value: '7A9E9F', comment: '' },
                    { key: 'TRANSPARENT_LIGHT', value: 'EEEEEE22', comment: '' },
                    { key: 'TRANSPARENT_DARK', value: '22222222', comment: '' },
                    { key: 'HOVER', value: '00000055', comment: '' }
                ],
                comment: 'UI texts'
            },
            {
                key: 'SET',
                value: [
                    { key: 'Default', value: 'CDD9DC', comment: '' },
                    { key: 'Enhanced', value: 'CDD9DC', comment: '' },
                    { key: 'Joker', value: '424E54', comment: '' },
                    { key: 'Tarot', value: '424E54', comment: '' },
                    { key: 'Planet', value: '424E54', comment: '' },
                    { key: 'Spectral', value: '424E54', comment: '' },
                    { key: 'Voucher', value: '424E54', comment: '' }
                ],
                comment: 'Backgrounds for certain types of cards'
            },
            {
                key: 'SECONDARY_SET',
                value: [
                    { key: 'Default', value: '9BB6BDFF', comment: '' },
                    { key: 'Enhanced', value: '8389DDFF', comment: '' },
                    { key: 'Joker', value: '708B91', comment: '' },
                    { key: 'Tarot', value: 'A782D1', comment: '' },
                    { key: 'Planet', value: '13AFCE', comment: '' },
                    { key: 'Spectral', value: '4584FA', comment: '' },
                    { key: 'Voucher', value: 'FD682B', comment: '' },
                    { key: 'Edition', value: '4CA893', comment: '' }
                ],
                comment: 'Backgrounds for certain types of cards'
            },
            {
                key: 'RARITY',
                value: ['009DFF', '4BC292', 'FE5F55', 'B26CBB'],
                comment: ['Common', 'Uncommon', 'Rare', 'Legendary']
            },
            {
                key: 'BLIND',
                value: [
                    { key: 'Small', value: '50846E', comment: '' },
                    { key: 'Big', value: '50846E', comment: '' },
                    { key: 'Boss', value: 'B44430', comment: '' },
                    { key: 'won', value: '4F6367', comment: '' }
                ],
                comment: ''
            },
            {
                key: 'HAND_LEVELS',
                value: ['EFEFEF', '95ACFF', '65EFAF', 'FAE37E', 'FFC052', 'F87D75', 'CAA0EF'],
                comment: ['Lvl 1', 'Lvl 2', 'Lvl 3', 'Lvl 4', 'Lvl 5', 'Lvl 6', 'Lvl 7+']
            },
            {
                key: 'BACKGROUND',
                value: [
                    { key: 'L', value: 'FFFF00', comment: '' },
                    { key: 'D', value: '374244', comment: '' },
                    { key: 'C', value: '374244', comment: '' }
                ],
                comment: ''
            },
            {
                key: 'BOSSES',
                value: [
                    { key: 'bl_ox', value: 'B95B08', comment: '' },
                    { key: 'bl_hook', value: 'A84024', comment: '' },
                    { key: 'bl_mouth', value: 'AE718E', comment: '' },
                    { key: 'bl_fish', value: '3E85BD', comment: '' },
                    { key: 'bl_club', value: 'B9CB92', comment: '' },
                    { key: 'bl_manacle', value: '575757', comment: '' },
                    { key: 'bl_tooth', value: 'B52D2D', comment: '' },
                    { key: 'bl_wall', value: '8A59A5', comment: '' },
                    { key: 'bl_house', value: '5186A8', comment: '' },
                    { key: 'bl_mark', value: '6A3847', comment: '' },
                    { key: 'bl_wheel', value: '50BF7C', comment: '' },
                    { key: 'bl_arm', value: '6865F3', comment: '' },
                    { key: 'bl_psychic', value: 'EFC03C', comment: '' },
                    { key: 'bl_goad', value: 'B95C96', comment: '' },
                    { key: 'bl_water', value: 'C6E0EB', comment: '' },
                    { key: 'bl_eye', value: '4B71E4', comment: '' },
                    { key: 'bl_plant', value: '709284', comment: '' },
                    { key: 'bl_needle', value: '5C6E31', comment: '' },
                    { key: 'bl_head', value: 'AC9DB4', comment: '' },
                    { key: 'bl_window', value: 'A9A295', comment: '' },
                    { key: 'bl_serpent', value: '439A4F', comment: '' },
                    { key: 'bl_pillar', value: '7E6752', comment: '' },
                    { key: 'bl_flint', value: 'E56A2F', comment: '' },
                    { key: 'bl_final_bell', value: '009CFD', comment: 'Cerulean Bell' },
                    { key: 'bl_final_leaf', value: '56A786', comment: 'Verdant Leaf' },
                    { key: 'bl_final_vessel', value: '8A71E1', comment: 'Violet Vessel' },
                    { key: 'bl_final_acorn', value: 'FDA200', comment: 'Amber Acorn' },
                    { key: 'bl_final_heart', value: 'AC3232', comment: 'Crimson Heart' }
                ],
                comment: 'Boss Colors (does not affect background)'
            }
        ]; 

        // Copy of color data that will be modified
        let colorData = JSON.parse(JSON.stringify(defaultColorData));

        // Store references to Spectrum instances
        const spectrumInstances = [];

        // Function to create color pickers using Spectrum
        function createColorPickers(dataArray, container, defaultDataArray) {
            dataArray.forEach((item, index) => {
                const key = item.key;
                const value = item.value;
                const comments = item.comments || []; // Get comments for each item
        
                // Check if the value is an array of colors
                if (Array.isArray(value)) {
                    value.forEach((color, idx) => {
                        const displayName = `${key}[${idx}]`;  // e.g., SPLASH[0], SPLASH[1]
                        const comment = comments[idx] || '';   // Get the corresponding comment for each color
                        const defaultColor = defaultDataArray[index].value[idx]; // Default color value
        
                        createColorItem(color, displayName, value, idx, container, defaultColor, comment);
                    });
                } else {
                    // For single color items (non-array)
                    const comment = item.comment || ''; // Handle comment for single color items
                    const defaultColor = defaultDataArray[index].value;
                    createColorItem(value, key, dataArray, index, container, defaultColor, comment);
                }
            });
        }

        function createCategoryDiv(categoryObj, container) {
            const categoryDiv = document.createElement('div');
            categoryDiv.className = 'category';

            const categoryTitle = document.createElement('h2');
            categoryTitle.textContent = categoryObj.key;
            categoryDiv.appendChild(categoryTitle);

            const colorGrid = document.createElement('div');
            colorGrid.className = 'color-grid';

            categoryObj.items.forEach(item => {
                if (Array.isArray(item.value) && (typeof item.value[0] === 'string' || typeof item.value[0] === 'number')) {
                    // Array of colors
                    const defaultArrayData = item.defaultValue || [];
                    item.value.forEach((colorValue, idx) => {
                        const defaultColorValue = defaultArrayData[idx] || 'FFFFFF';
                        const subComment = item.subComments ? item.subComments[idx] : '';
                        createColorItem(colorValue, `${item.key}[${idx}]`, item.value, idx, colorGrid, defaultColorValue, subComment);
                    });
                } else if (typeof item.value === 'string') {
                    // Single color value
                    const defaultColorValue = item.defaultValue || 'FFFFFF';
                    createColorItem(item.value, item.key, item.dataArray, item.dataIndex, colorGrid, defaultColorValue, item.comment);
                }
            });

            categoryDiv.appendChild(colorGrid);
            container.appendChild(categoryDiv);
        }

        function createColorItem(colorValue, displayName, parentDataArray, dataIndex, container, defaultColorValue, comment = '') {
            // Create the color item as usual (colorName, colorPicker, etc.)
            const colorItem = document.createElement('div');
            colorItem.className = 'color-item';
        
            const colorName = document.createElement('div');
            colorName.className = 'color-name';
            colorName.textContent = displayName;
        
            // Append the color name to the item
            colorItem.appendChild(colorName);
        
            const controlsContainer = document.createElement('div');
            controlsContainer.className = 'controls-container';
        
            const colorOriginal = document.createElement('div');
            colorOriginal.className = 'color-original';
            colorOriginal.style.backgroundColor = '#' + defaultColorValue.slice(0, 6);
        
            const arrow = document.createElement('div');
            arrow.className = 'arrow';
            arrow.textContent = 'â†’';
        
            const colorInput = document.createElement('input');
            colorInput.type = 'text';
            colorInput.className = 'color-picker';
            colorInput.value = '#' + colorValue.slice(0, 6);
        
            const hexInput = document.createElement('input');
            hexInput.type = 'text';
            hexInput.value = colorValue.toUpperCase();
            hexInput.className = 'hex-input';
            hexInput.maxLength = 8;
        
            const resetButton = document.createElement('button');
            resetButton.className = 'reset-button';
            resetButton.title = 'Reset to Default';
        
            // Append controls
            controlsContainer.appendChild(colorOriginal);
            controlsContainer.appendChild(arrow);
            controlsContainer.appendChild(colorInput);
            controlsContainer.appendChild(hexInput);
            controlsContainer.appendChild(resetButton);
            colorItem.appendChild(controlsContainer);
        
            // Now append the individual comment below the color picker
            if (comment) {
                const colorComment = document.createElement('div');
                colorComment.className = 'color-comment';
                colorComment.textContent = comment; // Add individual comment
                colorItem.appendChild(colorComment);
            }
        
            container.appendChild(colorItem);
        
            // Initialize Spectrum picker and handle events (color change, reset, etc.)
            const spectrumInstance = $(colorInput).spectrum({
                color: '#' + colorValue.slice(0, 6),
                showAlpha: true,
                change: function(tinycolor) {
                    parentDataArray[dataIndex] = tinycolor.toHexString().toUpperCase().slice(1);
                }
            });
        }
        
            // Store reference for reset all functionality
            spectrumInstances.push({
                spectrumInstance: spectrumInstance,
                colorInput: colorInput,
                hexInput: hexInput,
                parentDataArray: parentDataArray,
                dataIndex: dataIndex,
                defaultColorValue: defaultColorValue
            });
        
            // Update functions
            function updateColor(newColor) {
                if (/^[0-9A-Fa-f]{6,8}$/.test(newColor)) {
                    let colorString = '#' + newColor;
                    $(colorInput).spectrum("set", colorString);
                    updateParentData(newColor.toUpperCase());
                }
            }
        
            function updateParentData(newColor) {
                if (Array.isArray(parentDataArray)) {
                    parentDataArray[dataIndex] = newColor;
                } else {
                    parentDataArray.value = newColor;
                }
            }
        
            hexInput.addEventListener('input', function() {
                const newHex = hexInput.value.toUpperCase();
                if (/^[0-9A-Fa-f]{6,8}$/.test(newHex)) {
                    updateColor(newHex);
                }
            });
        
            hexInput.addEventListener('blur', function() {
                // Validate hex code on blur
                if (!/^[0-9A-Fa-f]{6,8}$/.test(hexInput.value)) {
                    const currentHex = Array.isArray(parentDataArray) ? parentDataArray[dataIndex] : parentDataArray.value;
                    hexInput.value = currentHex.toUpperCase();
                }
            });
        }

        // Initialize the color pickers
        const colorContainer = document.getElementById('colorContainer');
        createColorPickers(colorData, colorContainer, defaultColorData);

        // Reset All functionality
        document.getElementById('resetAllButton').addEventListener('click', function() {
            if (confirm('Are you sure you want to reset all colors to their default values? This action cannot be undone.')) {
                // Reset colorData to defaultColorData
                colorData = JSON.parse(JSON.stringify(defaultColorData));

                // Update all Spectrum instances and hex inputs
                spectrumInstances.forEach(function(item) {
                    // Update parent data
                    item.defaultColorValue = item.defaultColorValue || 'FFFFFF';
                    if (Array.isArray(item.parentDataArray)) {
                        item.parentDataArray[item.dataIndex] = item.defaultColorValue;
                    } else {
                        item.parentDataArray.value = item.defaultColorValue;
                    }
                    // Update Spectrum color picker
                    const defaultHexColor = item.defaultColorValue.slice(0, 6).toUpperCase();
                    const defaultAlpha = item.defaultColorValue.length >= 8 ? parseInt(item.defaultColorValue.slice(6, 8), 16) / 255 : 1;
                    const defaultColorString = '#' + defaultHexColor + (defaultAlpha < 1 ? item.defaultColorValue.slice(6, 8) : '');
                    $(item.colorInput).spectrum("set", defaultColorString);
                    // Update hex input
                    item.hexInput.value = item.defaultColorValue.toUpperCase();
                });
            }
        });

        // Export to Lua functionality
        document.getElementById('exportLuaButton').addEventListener('click', function() {
            const exportedLua = 'return ' + convertToLuaTable(colorData);
            document.getElementById('exportLuaOutput').value = exportedLua;
        });

        // Function to convert the array-based color data to Lua table format
        function convertToLuaTable(dataArray, indent = '', isRoot = true) {
            let lua = isRoot ? '{\n' : '{\n';
            const indent2 = indent + '    ';
            dataArray.forEach(item => {
                const key = item.key;
                const value = item.value;
                lua += indent2;
                if (/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(key)) {
                    lua += key + ' = ';
                } else {
                    lua += '["' + key + '"] = ';
                }
                if (Array.isArray(value)) {
                    if (value.length > 0 && typeof value[0] === 'object') {
                        lua += convertToLuaTable(value, indent2, false) + ',\n';
                    } else if (value.length > 0 && (typeof value[0] === 'string' || typeof value[0] === 'number')) {
                        // Array of colors
                        lua += '{\n';
                        value.forEach(function(val) {
                            lua += indent2 + '    HEX(\'' + val + '\'),\n';
                        });
                        lua += indent2 + '},\n';
                    } else {
                        lua += 'nil,\n';
                    }
                } else if (typeof value === 'string') {
                    lua += 'HEX(\'' + value + '\'),\n';
                } else {
                    lua += 'nil,\n';
                }
            });
            lua += indent + '}';
            return lua;
        }
    </script>
</body>
</html>
